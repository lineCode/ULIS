import subprocess
from colorama import Fore, Back, Style
from colorama import init as init_colorama
init_colorama()
#formats = [
#"3726693057","3651714402","2876281462","519087463","427346628","5971815","2949113230","2823785005","2859660611","1082218158","1191786765","3972497503","3947884540","2353902881","537617360","4141376015","4048555436","1520350462","1561779037","550983559","2358346102","1036064802","657488435","2407204173","3855733981","2191662083","2555608594","505620353","80889232","2895723246","3325291390","3030262563","2926526770","3920594909","4083082700","1528142514","834620194","1308531489","1460664624","2059966001","1614410784","3362949982","2732088014","3599646912","3430884049","1681153455","245271615","1145270105","1588727112","3892689320","4076133305","3842397625","4294391720","1471957206","1024891206","1228964680","1404166489","4227505703","2437959607","3538657309","3357196812","2125297388","1683756285","3105209938","4053100513","2606162440","2599911921","3531036738","2909461800","1836786093","637270046","1409967402","4263260225","3063736818","1381689008","450510595","1572311378","4059121571","1641214921","693250682","3449038136","2232745099","3407830550","1733920999","3009916236","1368517933","1574790304","2424673007","1920193166","1809931136","1728656051","2248110802","2457985922","4100858719","379085630","1479079342","3135157711","2604406778","930791691","1805705431","2304155830","3353753126","621835847","227858622","2714897999","4208710454","1783952670","4025798796","3754912131","2654614242","2919336941","3382129347","1494750443","3703058809","3968043126","3185052993","2380510286","156202239","2579518167","476084037","744214090","1247063325","2054099986","1600497184","3488251912","1246406042","2054233237","4079186129","1672238841","3859575659","3593980516","3644046577","3909617150","1970629120","1162793743","2924656807","1054711439","3145579293","2336621074","34893398","2459650174","389770732","654365923","1191018361","1992738422","3938167176","3665825927","2778614459","2593968802","864126983","2256303384","3112103169","96319271","1911608644","1324502365","4242345765","3801597096","3717553329","1322324569","1909688896","4116773725","1495674284","2102986528","1113300793","3508523473","3994896840","1674064921","3482247912","2050055100","1366899530","1014242605","1507025951","1922761961","172499469","2925511747","2232919221","4079524367","1027134895","376485209","2440954718","3124126632","4204097143","1456715910","2734036519","2310960849","246464726","637050912","1815978291","3229317058","3108278253","1451164731","2828917981","2594615374","1973238680","2661409789","1831473170","2182192068","1740725247","4266459646","292981288","1376507663","3174063321","1853665159","3258612086","1636024950","2394442144","3452245127","587112273","4174667971","1418901042" ]
formats = [ "2407204173" ]
programs    = [ "ULIS_Profiler_CLANG.exe", "ULIS_Profiler_GCC.exe", "ULIS_Profiler_MSVC.exe" ]
#sizes       = [ 64,128,256,512,1024,2048,4096,8192,16384 ]
sizes       = [ 16384 ]
op          = [ "clear", "fill", "blend", "copy" ]
num_threads = [ 16, 32 ];
opt         = ["reg","mem","sse" ]
repeat      = 10000
num_blend_modes = 1


style_title = Back.WHITE + Fore.BLACK
styles = [ Fore.WHITE + Back.RED + Style.BRIGHT
         , Fore.WHITE + Back.YELLOW + Style.BRIGHT
         , Fore.WHITE + Back.CYAN + Style.BRIGHT
         , Fore.WHITE + Back.BLUE + Style.BRIGHT
         , Fore.WHITE + Back.MAGENTA + Style.BRIGHT
         , Fore.WHITE + Back.CYAN + Style.BRIGHT
         , Fore.WHITE + Back.RED + Style.BRIGHT
         , Fore.WHITE + Back.YELLOW + Style.BRIGHT ]
print( style_title )
print( "Compiler Op      Format                              NT  Rep     Size    Opt                     Time  " )
print( "_______________________________________________________________________________________________________" )
print( style_title+"CLEAR                                                                                                  " )
print( "_______________________________________________________________________________________________________" )
for fmt in formats:
    for i in range( len(sizes) ):
        for NT in num_threads:
            for program in programs:
                print( styles[i], end='' )
                subprocess.run([program,"clear",fmt,str(NT),str( int(1000000/sizes[i]) ),str(sizes[i]),"mem"])

print( style_title+"FILL                                                                                                   " )
print( "_______________________________________________________________________________________________________" )
for fmt in formats:
    for i in range( len(sizes) ):
        for NT in num_threads:
            for program in programs:
                print( styles[i], end='' )
                subprocess.run([program,"fill",fmt,str(NT),str( int(1000000/sizes[i]) ),str(sizes[i]),"mem"])

print( style_title+"BLEND                                                                                                  " )
print( "_______________________________________________________________________________________________________" )
for fmt in formats:
    for mode in range( num_blend_modes ):
        print( style_title+"_______________________________________________________________________________________________________" )
        for i in range( len(sizes) ):
            for NT in num_threads:
                for program in programs:
                    print( styles[i], end='' )
                    subprocess.run([program,"blend",fmt,str(NT),str( int(1000000/sizes[i]) ),str(sizes[i]),"mem", str( mode )])

print( style_title+"COPY                                                                                                   " )
print( "_______________________________________________________________________________________________________" )
for fmt in formats:
    for i in range( len(sizes) ):
        for NT in num_threads:
            for program in programs:
                print( styles[i], end='' )
                subprocess.run([program,"copy",fmt,str(NT),str( int(1000000/sizes[i]) ),str(sizes[i]),"mem"])
